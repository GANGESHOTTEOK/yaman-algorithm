# DFS2667

## [2667: 단지번호붙이기](https://www.acmicpc.net/problem/2667)

---

### 문제 설명

---

<그림 1>과 같이 정사각형 모양의 지도가 있다. 1은 집이 있는 곳을, 0은 집이 없는 곳을 나타낸다. 철수는 이 지도를 가지고 연결된 집의 모임인 단지를 정의하고, 단지에 번호를 붙이려 한다. 여기서 연결되었다는 것은 어떤 집이 좌우, 혹은 아래위로 다른 집이 있는 경우를 말한다. 대각선상에 집이 있는 경우는 연결된 것이 아니다. <그림 2>는 <그림 1>을 단지별로 번호를 붙인 것이다. 지도를 입력하여 단지수를 출력하고, 각 단지에 속하는 집의 수를 오름차순으로 정렬하여 출력하는 프로그램을 작성하시오.

![Untitled](DFS2667%20b28c1600ce874c6abba94d828d09bbab/Untitled.png)

### 문제 접근

---

1. 이중 반복문을 사용해 집이 있는 곳을 찾는다.
2. 집을 발견하면 우선 카운트를 올리고 현재 위치를 0으로 만든다(방문 처리). 그리고 현재 위치를 기준으로 상하좌우에 집이 있는지 검사한다.
3. 연결되어 있는 집에 방문하여 2번 과정을 반복한다. 방문할 수 있는 집이 없다면 직전 위치로 돌아온다. → dfs
4. 하나의 탐색이 끝나면 카운트를 리스트에 추가하고 다음 시작점을 찾는다.
5. 모든 탐색이 끝난 후 집의 수를 저장한 리스트를 오름차순으로 정렬한 후 출력한다.

- <그림 2>와 같은 지도를 실제로 만들 필요는 없다.
- 방문 체크 배열을 따로 사용하지 않는다.
- DFS의 정석같은 코딩 패턴이 있지만... 바로 떠오르는 아이디어로만 작성하였다.

### 문제 풀이

---

```java
/* input */
		for(int i=0; i<n; i++) {
			String str = input.next();
			for(int j=0; j<n; j++) {
				map[i][j] = str.charAt(j)-'0';
			}
		}
```

- 공백 없는 수열로 입력 받기 때문에 한 라인을 통째로 가져온 후 나눠준다. 이때 문자 단위로 가져온 후에 ‘0’을 빼서 실제 숫자값으로 처리한다.

```java
	for(int i=0; i<n; i++) {
		for(int j=0; j<n; j++) {
			if(map[i][j] == 1) {
				house = 0;
				dfs(i,j);
				area.add(house);
			}
		}
	}
```

- 실제 문제풀이 부분. 시작점을 찾으면 우선 현재의 집 수를 0으로 만든 후 dfs 시작, 종료 시 집 수를 리스트에 추가한다.

```java
public static void dfs(int x, int y) {
		house++;
		map[x][y] = 0;
		
		if( 0 <= x-1 && map[x-1][y] == 1 ) dfs(x-1,y); //up
		if( x+1 <n && map[x+1][y] == 1) dfs(x+1,y); //down
		if( 0 <= y-1 && map[x][y-1] == 1 ) dfs(x,y-1); //left
		if( y+1 < n && map[x][y+1] == 1 ) dfs(x,y+1); //right
	}
```

- 집 수를 증가시킨 후 현재 집을 방문한 것으로 처리한다. 이후 재귀적으로 탐색한다.
- if 조건의 순서를 주의한다. 순서가 뒤바뀌면 인덱싱 에러가 발생할 수 있다.

```java
Collections.sort(area);
		
		/* output */
		System.out.println(area.size());
		for(int i=0; i<area.size(); i++) {
			System.out.println(area.get(i));
		}
```

- 문제 출력 조건에 맞춰서 정렬 후 출력한다.

### 결과 및 한줄평

---

![Untitled](DFS2667%20b28c1600ce874c6abba94d828d09bbab/Untitled%201.png)

- 메모리와 시간이 상당히 많이 소요되었는데, 조금 더 효율적인 탐색 방식이 필요하다. (정석 패턴을 쓰는 이유가 있다)